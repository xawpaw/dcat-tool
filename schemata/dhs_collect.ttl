@prefix dcat:    <http://www.w3.org/ns/dcat#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dctype:  <http://purl.org/dc/dcmitype/> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdo:     <http://schema.org/> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix vcard:   <http://www.w3.org/2006/vcard/ns#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix dhs:     <https://usdhs.github.io/dcat-tool/#> .
@prefix dt:      <http://github.com/usdhs/dcat-tool/0.1#> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix usg:     <http://resources.data.gov/resources/dcat-us/#> .

# Classes
dhs:DataInventoryRecord a owl:Class ;
    rdfs:subClassOf dcat:Dataset .

dhs:Characteristics a owl:Class ;
    rdfs:subClassOf dcat:Dataset .

# SHACL Shapes
dhs:ValidOptions a sh:NodeShape ;
    sh:pattern "^(?!(na|n/a/none/no/unknown/not available)$)" ;
    sh:flags "i" .

dhs:ValidOptionsPersonOrOrg a sh:NodeShape ;
    sh:xone (
        [ sh:datatype xsd:string ; sh:pattern "^(?!(na|n/a/none/no/unknown/not available)$)" ; ]
        [ sh:class sdo:Person ; ]
        [ sh:class vcard:Individual ; ]
        [ sh:class vcard:Organization ; ]
    ) .

dhs:ValidDateValue a sh:NodeShape ;
    sh:pattern "[0-9]{4}-[0-9]{2}-[0-9]{2}" ;
    sh:minInclusive "1970-01-01"^^xsd:date ;
    sh:maxInclusive "2099-12-31"^^xsd:date .

dhs:characteristicsShape a sh:NodeShape ;
    sh:targetClass dhs:Characteristics ;
    rdfs:comment "The characteristics of a dataset - i.e. whether it contains PII, PMI, biometrics, etc."@en ;
    sh:property [
        sh:path dhs:ch-person-level ; sh:minCount 0 ; sh:datatype xsd:boolean ; sh:maxCount 1 ;
        sh:message "Use either 'true' or 'false' with lower case" ; a sh:PropertyShape ; dt:group dt:security
    ],
    [ sh:path dhs:ch-financial ; sh:minCount 0 ; sh:datatype xsd:boolean ; sh:maxCount 1 ;
        sh:message "Use either 'true' or 'false' with lower case" ; a sh:PropertyShape ; dt:group dt:security
    ],
    # ... (Add the remaining properties here in the same manner)
    [ sh:path dhs:ch-anonymized ; sh:minCount 0 ; sh:datatype xsd:boolean ; sh:maxCount 1 ;
        sh:message "Use either 'true' or 'false' with lower case" ; a sh:PropertyShape ; dt:group dt:security
    ] ;
    sh:closed true ;
    sh:ignoredProperties ( rdf:type ) .

dhs:dataInventoryRecordShape a sh:NodeShape ;
    sh:targetClass dhs:DataInventoryRecord ;
    rdfs:comment "Specify the DCATv3 fields (and other fields) that are being collected for the DHS Data Inventory Project."@en ;
    owl:versionInfo "2.0" ;
    dcterms:modified "2023-09-25"^^xsd:date ;
    sh:property [
        sh:path dcterms:identifier ; sh:minCount 1 ; sh:maxCount 1 ; sh:maxLength 128 ; sh:node dhs:ValidOptions ;
        sh:pattern "^\\S*$" ; sh:datatype xsd:string ;
        sh:message "Identifier (string) is required, must be valid value, and must not be more than 128 characters and cannot contain spaces." ;
        dt:title "unique identifier" ;
        rdfs:comment "<p>Similar to a serial number associated with your laptop, the identifier is a unique and specific combination of characters that identify the resource. The combination must start with the DHS component code, is limited to 128 characters, and be in the following format: code-xxx-x</p><p>Example:<ul class='no-bullets'><li>mgmt-test-2</li><li>fema-1234-D</li></ul></p>"@en ;
        a sh:PropertyShape ; dt:group dt:highLevel ;
    ],
    [ sh:path dcterms:title ; sh:minCount 1 ; sh:maxCount 1 ; sh:maxLength 256 ; sh:node dhs:ValidOptions ;
        sh:datatype xsd:string ;
        sh:message "Title (string) is required, must be a valid value, and must not be more than 255 characters." ;
        rdfs:comment "<p>The official name (title) given to the resource, limited to 255 characters. Acronyms should be used sparingly and only when explained in the description.</p><p>Example:<ul class='no-bullets'><li>DHS Data Inventory Introduction</li></ul></p>"@en ;
        dhs:excelWidth 30 ;
        a sh:PropertyShape ; dt:group dt:highLevel ;
    ],
    [ sh:path dcterms:description ; sh:minCount 1 ; sh:maxCount 1 ; sh:maxLength 4000 ; sh:node dhs:ValidOptions ;
        sh:datatype xsd:string ;
        sh:message "Description (string) is required, must be a valid value, and must not be more than 4,000 characters." ;
        a sh:PropertyShape ; dt:group dt:highLevel ;
    ],
    [ sh:path dcat:keyword ; sh:minCount 0 ; sh:node dhs:ValidOptions ; sh:datatype xsd:string ;
        sh:message "keyword (string) is optional, but must be a valid value." ;
        a sh:PropertyShape ; dt:group dt:highLevel ;
    ],
    [ sh:path dcterms:publisher ; sh:minCount 0 ; sh:node dhs:ValidOptionsPersonOrOrg ;
        sh:message "publisher (string, vcard or sdo:Person) is optional, but must be a valid value (not N/A)." ;
        sh:or ([ sh:class sdo:Person ][ sh:class vcard:Individual ][ sh:class sdo:Organization ][ sh:class vcard:Organization ][ sh:datatype xsd:string ]) ;
        a sh:PropertyShape ; dt:group dt:highLevel ;
    ],
    # ... (Continue adding the remaining properties in the same manner)
    [ sh:path dhs:recordTransmission ; sh:minCount 0 ; sh:datatype xsd:date ; sh:maxCount 1 ;
        sh:node dhs:ValidDateValue ;
        sh:message "recordTransmission is optional, but it is a date (like 12/31/2021 for Excel or 2021-12-31 for JSON and edits in the Mobius Maintenance page), and must be in the range between 1970-01-01 and 2099-12-31" ;
        a sh:PropertyShape ; dt:group dt:publication
    ],
    [ sh:path dhs:characteristics ; sh:minCount 0 ; sh:class dhs:Characteristics ;
        a sh:PropertyShape
    ] ;
    sh:closed true ;
    skos:definition "Constraints for a record in a data catalog, describing the registration of a single dataset or data service."@en ;
    sh:ignoredProperties ( rdf:type ) .

